<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
</head>
<body>
<h1>Dashboard</h1>
<div id="content"></div>

<script>
  // Function to fetch and display content based on user role
  function loadContent() {
    fetch('/api/users/current')
            .then(response => {
              if (!response.ok) {
                throw new Error('Failed to fetch current user details');
              }
              return response.json();
            })
            .then(user => {
              // Check if user object is empty or does not contain expected fields
              if (!user || !user.id || !user.username || !user.email || !user.role) {
                throw new Error('Invalid user details received');
              }

              // Continue processing user details and loading content based on role
              if (user.role === 'admin') {
                // Fetch and display content for admin users
              } else {
                // Fetch and display content for non-admin users
              }
            })
            .catch(error => {
              console.error('Error fetching current user details:', error.message);
              // Handle error gracefully, e.g., display error message to user
            });
  }

  // Call loadContent function when the page loads
  window.onload = loadContent;
</script>
</body>
</html>
